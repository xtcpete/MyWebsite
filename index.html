<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-touch-fullscreen" content="yes" />
    <link rel= "stylesheet" type= "text/css" media="screen and (min-device-width:641px)" href= "./static/css/index_pc.css">
    <link rel= "stylesheet" type= "text/css" media="screen and (max-device-width:640px)" href= "./static/css/index_mobile.css">
    <link rel="apple-touch-icon" sizes="180x180" href="./static/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./static/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./static/favicon/favicon-16x16.png">
    <link rel="manifest" href="./static/favicon/site.webmanifest">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.3/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="./static/data/details.js"></script>
    <script src="./static/data/main.js"></script>
    <script src="./scripts/index.js"></script>
    <script>
        !function(){window.SVG3DTagCloud=function(t,e){var i={entries:[],width:480,height:480,radius:"70%",radiusMin:75,bgDraw:!0,bgColor:"#000",opacityOver:1,opacityOut:.05,opacitySpeed:6,fov:800,speed:2,fontFamily:"Arial, sans-serif",fontSize:"15",fontColor:"#ffffff",fontWeight:"normal",fontStyle:"normal",fontStretch:"normal",fontToUpperCase:!1,tooltipFontFamily:"Arial, sans-serif",tooltipFontSize:"15",tooltipFontColor:"#fff",tooltipFontWeight:"normal",tooltipFontStyle:"normal",tooltipFontStretch:"normal",tooltipFontToUpperCase:!1,tooltipTextAnchor:"left",tooltipDiffX:0,tooltipDiffY:10,animatingSpeed:.01,animatingRadiusLimit:1.3};if(void 0!==e)for(var o in e)e.hasOwnProperty(o)&&i.hasOwnProperty(o)&&(i[o]=e[o]);if(!i.entries.length)return!1;var n,r,a,s,l,u,c,d=[],m=!0,f={x:0,y:0},p={x:0,y:0,z:0},h={x:0,y:0},v={sx:0,cx:0,sy:0,cy:0},y=Math.PI/180,g="http://www.w3.org/2000/svg",w=1;function A(){window.cancelAnimFrame(c),window.removeEventListener("resize",M),u&&l.removeChild(u),l&&(t.removeChild(l),l.removeEventListener("mousemove",D),delete l)}function b(){(l=document.createElementNS(g,"svg")).addEventListener("mousemove",D),t.appendChild(l),i.bgDraw&&((u=document.createElementNS(g,"rect")).setAttribute("x",0),u.setAttribute("y",0),u.setAttribute("fill",i.bgColor),l.appendChild(u)),function(){for(var t=!1,e=1,o=i.entries.length+1;e<o;e++){var r=Math.acos(2*e/o-1),a=Math.sqrt(o*Math.PI)*r,s=Math.cos(a)*Math.sin(r),u=Math.sin(a)*Math.sin(r),c=Math.cos(r),m=F(e-1,i.entries[e-1],s,u,c);d.push(m),void 0!==i.entries[e-1].tooltip&&(t=!0)}t&&((n=document.createElementNS(g,"text")).setAttribute("x",0),n.setAttribute("y",0),n.setAttribute("fill",i.tooltipFontColor),n.setAttribute("font-family",i.tooltipFontFamily),n.setAttribute("font-size",i.tooltipFontSize),n.setAttribute("font-weight",i.tooltipFontWeight),n.setAttribute("font-style",i.tooltipFontStyle),n.setAttribute("font-stretch",i.tooltipFontStretch),n.setAttribute("text-anchor",i.tooltipTextAnchor),n.textContent="",l.appendChild(n))}(),x(),C(),window.addEventListener("resize",M)}function x(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,o=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,n=e,c=o;i.width.toString().indexOf("%")>0||i.height.toString().indexOf("%")>0?(n=Math.round(t.offsetWidth/100*parseInt(i.width)),c=Math.round(n/100*parseInt(i.height))):(n=parseInt(i.width),c=parseInt(i.height)),e<=n&&(n=e),o<=c&&(c=o),s={x:n/2,y:c/2},h.x=i.speed/s.x,h.y=i.speed/s.y,(a=n>=c?c/100*parseInt(i.radius):n/100*parseInt(i.radius))<1&&(a=1),(r=a/2)<i.radiusMin&&(r=i.radiusMin,a=2*r),l.setAttribute("width",n),l.setAttribute("height",c),i.bgDraw&&(u.setAttribute("width",n),u.setAttribute("height",c)),function(t){for(var e=0,i=d.length;e<i;e++)o=d[e],n=t,void 0,void 0,void 0,void 0,r=o.vectorPosition.x-p.x,a=o.vectorPosition.y-p.y,s=o.vectorPosition.z-p.z,l=Math.sqrt(r*r+a*a+s*s),o.vectorPosition.x/=l,o.vectorPosition.y/=l,o.vectorPosition.z/=l,o.vectorPosition.x*=n,o.vectorPosition.y*=n,o.vectorPosition.z*=n;var o,n,r,a,s,l}(r*w)}function F(t,e,o,n,r){var a={};return void 0!==e.label?(a.element=document.createElementNS(g,"text"),a.element.setAttribute("x",0),a.element.setAttribute("y",0),a.element.setAttribute("fill",i.fontColor),a.element.setAttribute("font-family",i.fontFamily),a.element.setAttribute("font-size",e.fontSize?e.fontSize:i.fontSize),a.element.setAttribute("font-weight",i.fontWeight),a.element.setAttribute("font-style",i.fontStyle),a.element.setAttribute("font-stretch",i.fontStretch),a.element.setAttribute("text-anchor","middle"),a.element.textContent=i.fontToUpperCase?e.label.toUpperCase():e.label):void 0!==e.image&&(a.element=document.createElementNS(g,"image"),a.element.setAttribute("x",0),a.element.setAttribute("y",0),a.element.setAttribute("width",e.width),a.element.setAttribute("height",e.height),a.element.setAttribute("id","image_"+t),a.element.setAttributeNS("http://www.w3.org/1999/xlink","href",e.image),a.diffX=e.width/2,a.diffY=e.height/2),a.link=document.createElementNS(g,"a"),a.link.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.url),a.link.setAttribute("target",e.target),a.link.addEventListener("mouseover",P,!0),a.link.addEventListener("mouseout",z,!0),a.link.appendChild(a.element),void 0!==e.tooltip?(a.tooltip=!0,a.tooltipLabel=i.tooltipFontToUpperCase?e.tooltip.toUpperCase():e.tooltip):a.tooltip=!1,a.index=t,a.mouseOver=!1,a.vectorPosition={x:o,y:n,z:r},a.vector2D={x:0,y:0},l.appendChild(a.link),a}function S(t){for(var e=0,i=d.length;e<i;e++){var o=d[e];if(o.element.getAttribute("x")===t.getAttribute("x")&&o.element.getAttribute("y")===t.getAttribute("y"))return o}}function C(){c=requestAnimFrame(C),function(){var t=h.x*f.x-i.speed,e=i.speed-h.y*f.y,o=t*y,n=e*y;v.sx=Math.sin(o),v.cx=Math.cos(o),v.sy=Math.sin(n),v.cy=Math.cos(n);for(var l=0,u=d.length;l<u;l++){var c=d[l];if(m){var p=c.vectorPosition.x,g=c.vectorPosition.y*v.sy+c.vectorPosition.z*v.cy;c.vectorPosition.x=p*v.cx+g*v.sx,c.vectorPosition.y=c.vectorPosition.y*v.cy+c.vectorPosition.z*-v.sy,c.vectorPosition.z=p*-v.sx+g*v.cx}var A,b=i.fov/(i.fov+c.vectorPosition.z);c.vector2D.x=c.vectorPosition.x*b+s.x,c.vector2D.y=c.vectorPosition.y*b+s.y,c.diffX&&c.diffY&&(c.vector2D.x-=c.diffX,c.vector2D.y-=c.diffY),c.element.setAttribute("x",c.vector2D.x),c.element.setAttribute("y",c.vector2D.y),m?(A=(r-c.vectorPosition.z)/a)<i.opacityOut&&(A=i.opacityOut):(A=parseFloat(c.element.getAttribute("opacity")),c.mouseOver?A+=(i.opacityOver-A)/i.opacitySpeed:A+=(i.opacityOut-A)/i.opacitySpeed),c.element.setAttribute("opacity",A*(1-(w-1)/(i.animatingRadiusLimit-1)))}d=d.sort(function(t,e){return e.vectorPosition.z-t.vectorPosition.z})}()}function P(t){m=!1;var e,o=S(t.target);!function(t){for(var e=0,i=d.length;e<i;e++){var o=d[e];o.index===t.index?o.mouseOver=!0:o.mouseOver=!1}}(o),o.tooltip&&(e=o).tooltip&&(n.setAttribute("x",e.vector2D.x-i.tooltipDiffX),n.setAttribute("y",e.vector2D.y-i.tooltipDiffY),n.textContent=i.tooltipFontToUpperCase?e.tooltipLabel.toUpperCase():e.tooltipLabel,n.setAttribute("opacity",1))}function z(t){m=!0;var e=S(t.target);e.tooltip&&n.setAttribute("opacity",0)}function D(t){var e,i;e=t,i=l.getBoundingClientRect(),f={x:e.clientX-i.left,y:e.clientY-i.top}}function M(t){x()}function T(t){w=Math.min(Math.max(t,1),i.animatingRadiusLimit),x()}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},window.cancelAnimFrame=window.requestAnimationFrame?window.cancelAnimationFrame:window.webkitRequestAnimationFrame?window.webkitCancelAnimationFrame:window.mozRequestAnimationFrame?window.mozCancelAnimationFrame:window.clearTimeout;var E=!1,O=!1,L=!1;function k(){(L=w<i.animatingRadiusLimit)?(T(w+i.animatingSpeed),requestAnimFrame(k)):"function"==typeof E&&(E(),E=!1)}function q(){(L=w>1)?(T(w-i.animatingSpeed),requestAnimFrame(q)):"function"==typeof O&&(O(),O=!1)}b(),this.destroy=A,this.animOut=function(t){L||(w=1,E=t,k())},this.animIn=function(t){L||(w=i.animatingRadiusLimit,O=t,q())},this.setEntries=function(t){A(),i.entries=t,b()}}}(),"undefined"!=typeof jQuery&&function(t){t.fn.svg3DTagCloud=function(e){var i=arguments;return this.each(function(){if(t.data(this,"plugin_SVG3DTagCloud")){var o=t.data(this,"plugin_SVG3DTagCloud");o[e]?o[e].apply(this,Array.prototype.slice.call(i,1)):t.error("Method "+e+" does not exist on jQuery.svg3DTagCloud")}else t.data(this,"plugin_SVG3DTagCloud",new SVG3DTagCloud(this,e))})}}(jQuery);
    </script>
    <title>Gonglin Chen</title>
</head>
<body>
    <div class="container" id="container">
        <!--
        <div class="header">
            <div class="header-text">XTCPETE</div>
            <button class="header-button" id="home_button" style="background: #1B262C; color: white" onClick="navigateTo(home)" ></button>
            <button class="header-button" id="experiences_button" onClick="navigateTo(experiences)"></button>
            <button class="header-button" id="projects_button" onClick="navigateTo(projects)"></button>
            <div class="nev" onClick="openMenu()">MENU</div>
        </div>
        <div id="nev-page" style="display: none; height: fit-content; width: 100%; z-index: 999; position: fixed;
    top: 0; background: whitesmoke;">
            <button class="nev-button" id="home_button" style="background: #1B262C; color: white" onClick="navigateTo(home)" ></button>
            <button class="nev-button" id="experiences_button" onClick="navigateTo(experiences)"></button>
            <button class="nev-button" id="projects_button" onClick="navigateTo(projects)"></button>
        </div>

        <div class="chat">
            <div class="chat-title">
                <h1>Gonglin Chen's</h1>
                <h2>Assistant</h2>
                <h3>Powered by Gemma-7b</h3>
                <figure class="avatar">
                    <img src="./static/imgs/robot.png" />
                </figure>
            </div>
            <div class="messages" id="messages">
                <div class="messages-content"></div>
            </div>
            <div class="message-box">
                <textarea type="text" class="message-input" placeholder="Type message..."></textarea>
                <button type="submit" class="message-submit" id="send_button">Send</button>
            </div>
        </div>

        <button type="submit" class="robot_button" onclick="showChat()" onmouseover="showHover()" onmouseout="hideHover()">
            <img src="./static/imgs/robot.png" alt="buttonpng" border="0" />
        </button>
        <span class="tooltiptext">Chat with LLM about Me! Click again to hide.</span>
        -->
        <section id="home" style="background: #1B262C; z-index: 1">
            <!--
            <div class="stars">
                <div class="star star1"></div>
                <div class="star star2"></div>
                <div class="star star3"></div>
                <div class="star star4"></div>
                <div class="star star5"></div>
                <div class="star star6"></div>
                <div class="star star7"></div>
                <div class="star star8"></div>
                <div class="star star9"></div>
                <div class="star star10"></div>
                <div class="star star11"></div>
                <div class="star star12"></div>
                <div class="star star13"></div>
                <div class="star star14"></div>
                <div class="meteor meteor1"></div>
                <div class="meteor meteor2"></div>
                <div class="meteor meteor3"></div>
                <div class="meteor meteor4"></div>
                <div class="meteor meteor5"></div>
                <div class="meteor meteor6"></div>
                <div class="meteor meteor7"></div>
                <div class="meteor meteor8"></div>
                <div class="meteor meteor9"></div>
                <div class="meteor meteor10"></div>
            </div>
            -->
            <div class="person-wrapper">
                <div class="personal-info">
                    <div>
                        <img class='profile_image' src="./static/imgs/profile_image.png">
                        <p class="home-title" id="home-title"></p>
                        <div class="link-button-wrapper">
                            <div class="links-wrapper">
                                <div class="links-list">
                                    <div class="link-holder" id="linkedin">
                                        <a id="linkedin_link"><img class='link-image' src="./static/imgs/linkedin.png"></a>
                                    </div>
                                    <div class="link-holder" id="github">
                                        <a id="github_link"><img class='link-image' src="./static/imgs/github.png"></a>
                                    </div>
                                    
                                    <div class="link-holder" id="instagram">
                                        <a id="ins_link"><img class='link-image' src="./static/imgs/instagram.png"></a>
                                    </div>
                                </div>
                            </div>
                            <div class="button-wrapper">
                                <div class="resume-button" id='resume-button' onclick="window.location.href='./static/resume.pdf';">
    
                                </div>
    
                                <div class="resume-button" id='contact-button'onclick="showContact()">
    
                                </div>
                            </div>
                        </div>
                        <div class="highlight" id="highlight"></div>
                    </div>
                    <div class="education-wrapper" id="education-wrapper">
                        
                    </div>
                </div>
            </div>
            <div class="animated-cloud"></div>
        
        </section>


        <section id="experiences" style="background: #424874; z-index: 1;">
            
            <h2 class="experience-title">Experiences</h2>
            <div class="experience-description">
                Take a look at what my experiences have prepared me for.
            </div>
            <div class="list-wrapper">
              <div class="cards-list" id="exp-cards-list">
                  
              </div>
            </div>
            
        </section>


        <section id="projects" style="background: #A75D5D; z-index: 1;">
            <div class="projects-header">
                <h2 class="projects-title">Projects</h2>
                <div class="projects-description">Explore the power of my expertise in problem-solving</div>
            </div>
            <div class="projects-wrapper">
                <div class="demo-wrapper">
                    <div class="subtitle">Try It (Demo)</div>
                    <div class="demo-list-wrapper">
                        <div class="projects-cards-list" style="height: fit-content" id="projects-demo">
                            
                        </div>
                    </div>
                </div>

                <div class="nodemo-wrapper">
                <div class="subtitle">Github/Colab</div>
                    <div class="nodemo-list-wrapper">
                        <div class="projects-cards-list" style="height: fit-content" id="projects-nodemo">
                            
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="mountain-wrapper">
                <div class="mountain">
                    <div class="m1"></div>
                    <div class="m2"></div>
                    <div class="line1"></div>
                    <div class="line2"></div>
                  </div>
      
                  <div class="mountain two">
                    <div class="m1"></div>
                    <div class="m2"></div>
                    <div class="line1"></div>
                    <div class="line2"></div>
                  </div>
                  <div class="small-mountain"></div>
                  <div class="small-mountain2"></div>
                  <div class="small-mountain3"></div>
                  <div class="small-mountain4"></div>
                  <div class="small-mountain5"></div>
            </div>
        </section>
    <div class="end-note">Â© 2023, Gonglin Chen</div>

    </div>

    <script>
        var $messages = $(".messages-content"),
            d,
            h,
            m,
            i = 0;

        $(window).load(function () {
            $messages.mCustomScrollbar();
            setTimeout(function () {
                fakeMessage(msg="Ask me anything about Gonglin!",load=true);
            }, 50);
        });

        function updateScrollbar() {
            var objDiv = document.getElementById("messages");
            objDiv.scrollTop = objDiv.scrollHeight + 500;
            console.log(objDiv.scrollHeight)
        }

        function setDate() {
            d = new Date();
            if (m != d.getMinutes()) {
                m = d.getMinutes();
                $('<div class="timestamp">' + d.getHours() + ":" + m + "</div>").appendTo(
                    $(".message:last")
                );
            }
        }

        function insertMessage() {
            
            msg = $(".message-input").val();
            if ($.trim(msg) == "") {
                return false;
            }
            $('<div class="message message-personal">' + msg + "</div>")
                .appendTo($(".mCSB_container"))
                .addClass("new");
            setDate();
            setTimeout(function () {
                updateScrollbar();
            }, 100);
            $(".message-input").val(null);
            setTimeout(function () {
                setTimeout(function () {
                    updateScrollbar();
                }, 100);
                fakeMessage(msg=msg);
            }, 100 + Math.random() * 20 * 100);
            // scrollToBottom();
        }

        $(".message-submit").click(function () {
            setTimeout(function () {
                updateScrollbar();
            }, 10);
            insertMessage(); 
        });

        $(window).on("keydown", function (e) {
            if (e.which == 13) {
                insertMessage();
                return false;
            }
        });

        async function query(msg) {

            template =  "Please act as a personal assistant of Gonglin and use the following pieces of context to answer the question at the end like a human assistant.\n\n" + JSON.stringify(details) + "\n\n" + JSON.stringify(main) + "\n\nQuestion: " + msg + "\n\nAnswer: "

            var data = {
                "inputs": template,
                "parameters": {
                    'temperature': 0.2,
                    'max_new_tokens': 512,
                    'top_p': 0.98,
                    'repitition_penalty': 1.0,
                }
            }

            const response = await fetch(
                "https://api-inference.huggingface.co/models/google/gemma-1.1-7b-it",
                {
                    headers: { Authorization: "Bearer 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", "Content-Type": "application/json"},
                    method: "POST",
                    body: JSON.stringify(data),
                }
            );
            const result = await response.json();
            return result;
        }

        function fakeMessage(msg="", load=false) {
            if ($(".message-input").val() != "") {
                return false;
            }
            $(
                '<div class="message loading new"><figure class="avatar"><img src="./static/imgs/robot.png" /></figure><span></span></div>'
            ).appendTo($(".mCSB_container"));
            
            if (load){
                setTimeout(function() {
                    $('.message.loading').remove();
                    $('<div class="message new"><figure class="avatar"><img src="./static/imgs/robot.png" /></figure>' + msg + '</div>').appendTo($('.mCSB_container')).addClass('new');
                    setDate();
                }, 100 + (Math.random() * 20) * 100);
            }
            else{
                query(msg).then((response) => {
                    setTimeout(function () {
                        var text = response[0]['generated_text']
                        var answer = text.split("Answer: ")[1]
                        $(".message.loading").remove();
                        $(
                            '<div class="message new"><figure class="avatar"><img src="./static/imgs/robot.png" /></figure>' +
                            answer +
                            "</div>"
                        ).appendTo($(".mCSB_container")).addClass("new");
                        setDate();
                        setTimeout(function () {
                            updateScrollbar();
                        }, 100);
                    }, 100 + Math.random() * 20 * 100);
                });
            }
        }

        function showChat(){
            $('.chat').toggleClass('active');
        }

        function showHover(){
            var tooltip = document.getElementsByClassName("tooltiptext")[0];
            if (isMobileDevice()){
                tooltip.style.visibility = "hidden";
            }
            else{
                tooltip.style.visibility = "visible";
            }
        }

        function hideHover(){
            var tooltip = document.getElementsByClassName("tooltiptext")[0];
            tooltip.style.visibility = "hidden";
        }
    </script>
</body>
</html>
